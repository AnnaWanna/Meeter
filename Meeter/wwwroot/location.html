<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Location</title>
</head>
<body>

    Setting your location!

    <script>

        window.onload = function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(setPosition);
            } else {
                console.log("Geolocation is not supported by this browser.");
            }
        }

        function setPosition(position) {

            const data = { lat: position.coords.latitude, lng: position.coords.longitude };

            fetch('api/meeter/location', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'lat': data.lat,
                    'lng': data.lng
                }
            })
                .then((response) => window.location.replace('api/meeter/index'));
        }

    </script>

</body>
</html>
